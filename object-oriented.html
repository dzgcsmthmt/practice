<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.0,user-scalable=no" />
    <style media="screen">
        html{
            font-size: 12px;
        }
        .icon-code,.icon-pwd,.icon-pwd2,.icon-pwd1,.icon-phone{
            width: 100px;
            height: 100px;
        }
    </style>
</head>

<body>
     <div id="t"><div>lions,<!--i am comment -->
        tigers</div><div style="visibility:hidden">and bears</div></div>
    <p class="11">this is a paragraph</p>

    <script type="text/javascript">
        'use strict'
        //extensible 不能添加 --> seal 不能加也不能减 same as const --> freeze 不加不减也不能改 configurabe:false,writable:false
        // no effect - delete only works on own properties
        /*
        When you use  Object.seal()
        or  Object.freeze() on an object, you are acting solely on the object instance
        and the own properties. You can’t add new own properties or change
        existing own properties on frozen objects, but you can certainly still add
        properties on the prototype and continue extending those objects
        */

        function mixin(receiver,supplier){
            for (var prop in supplier) {
                if (supplier.hasOwnProperty(prop)) {
                    receiver[prop] = supplier[prop];
                }
            }
            return receiver;
        }

        var obj = {a:1};
        Object.defineProperty(obj,'name',{
            value: 'zs',
            configurable:true,
            writable: true
        });

        console.log(Object.keys(obj));
        console.log(Object.getOwnPropertyDescriptor(obj,'name'));

        function Person(name){
            if(this instanceof Person){
                this.name = name;
            }else{
                return new Person(name);
            }
        }

        var p1 = Person('zf');
        console.log(p1);
        console.log(Object.getPrototypeOf(p1));


        function EventTarget(){

        }

        EventTarget.prototype = {
            constructor: EventTarget,
            addListener: function(type,listener){
                if(!this.hasOwnProperty('_listeners')){
                    this._listeners = {};
                }

                if(!this._listeners[type]){
                    this._listeners[type] = [];
                }

                this._listeners[type].push(listener);

            },
            fire: function(event){
                var cbs;
                if(!event.target){
                    event.target = this;
                }

                if(!event.type){
                    throw new Error('Event object missing "type" property');
                }

                if(this._listeners && Array.isArray(cbs = this._listeners[event.type])){
                    for (var i = 0,len = cbs.length; i < len; i++) {
                        cbs[i].call(this,event);
                    }
                }

            },
            removeListener: function(type,listener){
                var listeners;
                if(this._listeners && Array.isArray(listeners = this._listeners[type])){
                    for (var i = 0,len = listeners.length; i < len; i++) {
                        if(listeners[i] == listener){
                            listeners.splice(i,1);
                            break;
                        }
                    }
                }
            }
        }

        var target = new EventTarget();
        target.addListener("message", function(event) {
            console.log("Message is " + event.data);
        })
        target.fire({
            type: "message",
            data: "Hello world!"
        });

        console.log(target);

    </script>
</body>

</html>
